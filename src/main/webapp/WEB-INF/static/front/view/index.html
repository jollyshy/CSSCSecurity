<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>首页</title>
	<link rel="shortcut icon" href="../images/logo.png" />
	<link type="text/css" href="../css/bootstrap.min.css" rel="stylesheet" />
	<link type="text/css" href="../css/main.css" rel="stylesheet" />
	<script src="../js/jquery.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$(".hide-info").hover(function() {
				$(this).find("em").animate({opacity: "show", top: "-75"}, "slow");
			}, function() {
				$(this).find("em").animate({opacity: "hide", top: "-85"}, "fast");
			});
		});
	</script>
</head>

<body>
<div class="header" >
	<div class="container">
		<div class='row'>
			<div class='col-md-12'>
				<div class='row title'>
					<div class='col-md-10 ' >
						<h3>
							中国船舶工业集团安全生产技术研究中心</h3>
						<p>SAFETY PRODUCTION TECHNOLOGY RESEARCH CENTER,CSSC</p>
					</div>
				</div>
				<div class='row'>
					<div class='col-md-12'>
						<nav class="navbar navbar-default" role="navigation" >
							<div class="container-fluid">
								<div class="navbar-header">
									<a class="navbar-brand" href="./index.html">网站首页</a>
								</div>
								<div>
									<ul class="nav navbar-nav">
										<li >
											<a href="./standard.html">标准管理</a>
										</li>
										<li>
											<a href="./law.html">法律法规管理</a>
										</li>
										<li>
											<a href="./health.html">安全及职业健康知识管理</a>
										</li>
										<li>
											<a href="./frock.html">安全工装管理</a>
										</li>
										<li>
											<a href="./accident.html">案例分析管理</a>
										</li>
										<li>
											<a href="./technique.html">国内外新技术管理</a>
										</li>
										<li class="hide-info">
											<a href="#">联系我们</a>
											<em>有问题，请联系。。。。。。。。。</em>
										</li>
									</ul>
								</div>
							</div>
						</nav>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container" id="MainView"></div>
<script type="text/template" id="MainView-template">
	<div class="row-content" >

		<div id="carouselcontainter" class="carousel" data-ride="carousel" style="width:1136px; height:270px;">
			<ol class="carousel-indicators">
				<li class="active" data-target="#carouselcontainter" data-slide-to="0">

				</li>
				<li  data-target="#carouselcontainter" data-slide-to="1">

				</li>
				<li  data-target="#carouselcontainter" data-slide-to="2">

				</li>
				<li  data-target="#carouselcontainter" data-slide-to="3">

				</li>
			</ol>
			<div class="carousel-inner" style="width:1136px;height:270px; ">
				<div class="item active" style="width:1140px;height:270px; ">
					<img src=" ../images/image1.jpg" alt="图片"width=“1140”;height=“270” >
				</div>
				<div class="item">
					<img src="../images/image2.JPG"  alt="图片" width="1140" height="270" >
				</div>
				<div class="item">
					<img src="../images/image3.jpg"  alt="图片" width="1140" height="270" >
				</div>
				<div class="item">
					<img src="../images/image4.png"  alt="图片" width="1140" height="270" >
				</div>
			</div>
		</div>
	</div>


	<div class="row-content" >

		<div class="row" style="margin-left:2px;width:1140px;">

		<div class="col-md-8" >
		  <div class="row" >
		  <div class="col-md-6" >
			  <h5 >
				  <span class="list-group-item active">标&nbsp&nbsp&nbsp准</span>
				  <a href="./standard.html" class="more" title="链接关键词" >more>></a>
			  </h5>

			  <div id="standListView"  ></div>

		  </div>

		  <div class="col-md-6"  >
			  <h5 >
						<span class="list-group-item active">
							法律法规</span>
				  <a href="./law.html" class="more" title="链接关键词">more>></a>
			  </h5>

			  <div id="lawListView" ></div>
		  </div>
	  </div>


			<div class="row" style="margin-left: 0px;margin-right: 0px;">
			<div class="col-md-6" >

				<h5 >
					<span class="list-group-item active">安全及职业健康知识</span>
					<a href="./health.html" class="more" title="链接关键词" >more>></a>
				</h5>

				<div id="healthListView"></div>
			</div>
			<div class="col-md-6" >
				<h5 >
					<span class="list-group-item active">安全工装</span>
					<a href="./frock.html" class="more" title="链接关键词" >more>></a>
				</h5>

				<div id="frockListView"></div>
			</div>
			</div>
			<div class="row" style="margin-left: 0px;margin-right: 0px;">
				<div class="col-md-6" >
					<h5 >
						<span class="list-group-item active">国内外新技术</span>
						<a href="./technique.html" class="more" title="链接关键词" >more>></a>
					</h5>

					<div id="techniqueListView"></div>
				</div>

				<div class="col-md-6" >
					<h5 >
						<span class="list-group-item active":>案例分析</span>
						<a href="./accident.html" class="more" title="链接关键词" >more>></a>
					</h5>

					<div id="accidentListView"></div>
				</div>
			</div>

		</div>

			<div class="col-md-4" >

		<div class="col-md-12" >
			<h5 >
				<span class="list-group-item active">
							新闻中心</span>
				<a href="" class="more" title="链接关键词">more>></a>
			</h5>

			<div id="newListView"></div>

		</div>

				<div class="col-md-12" >
					<h5 >
						<span class="list-group-item active" >关注我们</span>
					</h5>
					<div class="weicha-info" style="background: #fbfbfb">
						<div class="weicha-code"><img src="../images/mm.png" style="margin-left:92px;margin-top: 36px;"></div>
						<p >扫描微信，随时获得最新资讯</p>

					</div>

				</div>
			</div>
		</div>
	</div>

</script>
<!--标准管理视图-->
<script type="text/template" id="standardView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span class="text-right"><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>

<script type="text/template" id="standListView-template">

</script>
<!--法律法规视图-->
<script type="text/template" id="lawListView-template">

		</script>

<script type="text/template" id="lawView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>

<!--安全职业健康视图-->
<script type="text/template" id="healthListView-template">
		</script>

<script type="text/template" id="healthView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>
<!--安全工装视图-->
<script type="text/template" id="frockListView-template">

		</script>

<script type="text/template" id="frockView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>

<!--新闻中心视图-->
<script type="text/template" id="newListView-template">
	<ul class="list-group">

	</ul>
</script>

<script type="text/template" id="newView-template">
	<li class="list-group-item">
		<a href="javascript:void(0);" class="js-detail">
			<%= title %>
		</a>
		<span><%= publishDate %></span>
	</li>
</script>
<!--国内外新技术视图-->
<script type="text/template" id="techniqueListView-template">

</script>

<script type="text/template" id="techniqueView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>

<!--案例分析视图-->
<script type="text/template" id="accidentListView-template">

</script>

<script type="text/template" id="accidentView-template">
	<div class="row">
		<div class="col-xs-6">
			<a href="javascript:void(0);" class="js-detail">
				<%= name %>
			</a>
		</div>
		<div class="col-xs-4 col-xs-offset-2">
			<span><%= this.Timer(publishDate) %></span>
		</div>
	</div>

</script>

</body>

<script src="../js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="../js/moment.js" type="text/javascript"></script>
<script src="../js/jquery.json.js" type="text/javascript"></script>
<script src="../js/Underscore.js" type="text/javascript"></script>
<script src="../js/Backbone.js" type="text/javascript"></script>
<script src="../js/backbone.layoutmanager.js" type="text/javascript"></script>
<script src="../js/moment.js" type="text/javascript"></script>
<script type="text/javascript" src="../entities/entities.js"></script>
<script type="text/javascript" src="../handle/standard/standard.js"></script>
<script type="text/javascript" src="../handle/health/health.js"></script>
<script type="text/javascript" src="../handle/accident/accident.js"></script>
<script type="text/javascript" src="../handle/frock/frock.js"></script>
<script type="text/javascript" src="../handle/law/law.js"></script>
<script type="text/javascript" src="../handle/technique/technique.js"></script>
<script type="text/javascript"  src="../js/bootstrap-carousel.js"></script>
<script type="text/javascript"  src="../js/bootstrap-button.js"></script>
<script>
	!function ($) {
		$(function(){

			$('#carouselcontainter').carousel()
		})
	}(window.jQuery)
</script>

<!--<script type="text/javascript" src="../handle/new/new.js"></script>-->
<script type="text/javascript">
	(function(Backbone, _) {
		var EventBus = _.extend({}, Backbone.Events);
		var StandardCollection = Entities.Standard.Collection;
		var FrockCollection = Entities.Frock.Collection;
		var HealthCollection = Entities.Health.Collection;
		var LawCollection = Entities.Law.Collection;
		var AccidentCollection= Entities.Accident.Collection;
		//var NewCollection =  Entities.New.Collection();
		var TechniqueCollection = Entities.Technique.Collection;
		var Url = Entities.config.apiUrl;
		Backbone.Layout.configure({
			manage: true
		});
		//标准管理视图
		var StandView = Backbone.View.extend({
			template: '#standardView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/standardDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//标准管理列表视图
		var StandListView = Backbone.View.extend({
			template: '#standListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(StandardModel) {
				var standView = new StandView({
					model: StandardModel
				});
				this.insertView('', standView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});
		//法律法规视图
		var LawView = Backbone.View.extend({
			template: '#lawView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/lawDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//法律法规列表视图
		var LawListView = Backbone.View.extend({
			template: '#lawListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(LawModel) {
				var lawView = new LawView({
					model: LawModel
				});
				this.insertView('', lawView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});
		//安全职业健康视图
		var HealthView = Backbone.View.extend({
			template: '#healthView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/healthDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//安全职业健康列表视图
		var HealthListView = Backbone.View.extend({
			template: '#healthListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(HealthModel) {
				var healthView = new HealthView({
					model: HealthModel
				});
				this.insertView('', healthView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});
		//安全工装视图
		var FrockView = Backbone.View.extend({
			template: '#frockView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/frockDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//安全工装列表视图
		var FrockListView = Backbone.View.extend({
			template: '#frockListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(FrockModel) {
				var frockView = new FrockView({
					model: FrockModel
				});
				this.insertView('', frockView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});
		//新闻视图
		var NewView = Backbone.View.extend({
			template: '#NewView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			}
		});
		//新闻列表视图
		var NewListView = Backbone.View.extend({
			template: '#newListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(NewModel) {
				var newView = new NewView({
					model: NewModel
				});
				this.insertView('', newView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});
		//国内外新技术视图
		var TechniqueView = Backbone.View.extend({
			template: '#techniqueView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/techniqueDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//国内外新技术列表视图
		var TechniqueListView = Backbone.View.extend({
			template: '#techniqueListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(TechniqueModel) {
				var techniqueView = new TechniqueView({
					model: TechniqueModel
				});
				this.insertView('', techniqueView).render();
			},
			addAll: function() {
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});

		//案例分析视图
		var AccidentView = Backbone.View.extend({
			template: '#accidentView-template',
			tagName: 'li',
			className: 'list-group-item',
			Timer: function(time) {
				return moment(time).format('YYYY-MM-DD');
			},
			events: {
				'click .js-detail': '_onShowDetail'
			},
			_onShowDetail: function() {
				var m_id = this.model.id;
				var location = Url + "/front/detail/accidentDetail.html?id=" + m_id;
				window.open(location);
			}
		});
		//案例分析列表视图
		var AccidentListView = Backbone.View.extend({
			template: '#accidentListView-template',
			tagName: 'ul',
			className: 'list-group',
			initialize: function() {
				this.listenTo(this.collection, 'reset', this.addAll);
			},
			addOne: function(AccidentModel) {
				var accidentView = new AccidentView({
					model: AccidentModel
				});
				this.insertView('', accidentView).render();
			},
			addAll: function(){
				this.collection.each(this.addOne, this);
			},
			afterRender: function() {
				this.collection.fetch();
			}
		});



		var MainView = Backbone.View.extend({
			template: '#MainView-template',
			beforeRender: function() {
				this.standListView = new StandListView({
					collection: new StandardCollection()
				});
				this.lawListView = new LawListView({
					collection: new LawCollection()
				});
				this.healthListView = new HealthListView({
					collection: new HealthCollection()
				});
				this.frockListView = new FrockListView({
					collection: new FrockCollection()
				});

				this.accidentListView=new AccidentListView({
					collection:new AccidentCollection()
				});
				this.techniqueListView=new TechniqueListView({
					collection:new TechniqueCollection()
				});

				//this.newCollection = NewCollection();
				this.setViews({
					'#standListView': this.standListView,
					'#lawListView': this.lawListView,
					'#healthListView': this.healthListView,
					'#frockListView': this.frockListView,
					'#accidentListView':this.accidentListView,
					'#techniqueListView':this.techniqueListView
				});
			}
		});
		new MainView({
			el: '#MainView'
		}).render();
	})(Backbone, _);
</script>
</html>